###
000000000  00000000   00000000  00000000
   000     000   000  000       000     
   000     0000000    0000000   0000000 
   000     000   000  000       000     
   000     000   000  00000000  00000000
###

Tree = require '../tree'

▸ tree
    
    t = new Tree

    # 000  000   000  000  000000000  
    # 000  0000  000  000     000     
    # 000  000 0 000  000     000     
    # 000  000  0000  000     000     
    # 000  000   000  000     000     
    
    ▸ init
        
        t.toString() ▸ ''
        
        t.addMove 'C3'
        
        t.toString() ▸ 'C3◂'
        
        t.addMove 'B2'
        
        t.toString() ▸ 
        """
        C3
        B2◂
        """
        
        log t.toPOD()
        
    # 000   000   0000000   000   000  000   0000000    0000000   000000000  00000000  
    # 0000  000  000   000  000   000  000  000        000   000     000     000       
    # 000 0 000  000000000   000 000   000  000  0000  000000000     000     0000000   
    # 000  0000  000   000     000     000  000   000  000   000     000     000       
    # 000   000  000   000      0      000   0000000   000   000     000     00000000  
    
    ▸ navigate
    
        t.navigate 'up'

        t.toString() ▸ 
        """
        C3◂
        B2
        """

        for d in ['up''left''right']
            t.navigate d
    
            t.toString() ▸ 
            """
            C3◂
            B2
            """
        
        t.addMove 'B3'
        
        t.toString() ▸ 
        """
        C3
        B2──B3◂
        """
        
        t.navigate 'up'
        
        t.toString() ▸ 
        """
        C3
        B2──B3◂
        """

        for d in ['up''down''right']
            t.navigate d
            
            t.toString() ▸ 
            """
            C3
            B2──B3◂
            """

        t.navigate 'left'
        
        t.toString() ▸ 
        """
        C3
        B2◂─B3
        """

        for d in ['left''down']
            t.navigate 'left'
            
            t.toString() ▸ 
            """
            C3
            B2◂─B3
            """

        t.navigate 'right'
        
        t.toString() ▸ 
        """
        C3
        B2──B3◂
        """
        
    #  0000000   0000000    0000000    00     00   0000000   000   000  00000000  
    # 000   000  000   000  000   000  000   000  000   000  000   000  000       
    # 000000000  000   000  000   000  000000000  000   000   000 000   0000000   
    # 000   000  000   000  000   000  000 0 000  000   000     000     000       
    # 000   000  0000000    0000000    000   000   0000000       0      00000000  
    
    ▸ addmove1
    
        t.addMove 'A1'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1◂
        """

        t.addMove 'A2'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2◂
        """

        t.addMove 'A3'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2
            A3◂
        """
        
    #  0000000  00000000  000      00000000   0000000  000000000  
    # 000       000       000      000       000          000     
    # 0000000   0000000   000      0000000   000          000     
    #      000  000       000      000       000          000     
    # 0000000   00000000  0000000  00000000   0000000     000     
    
    ▸ select1
    
        t.select 1 1 0

        t.toString() ▸ 
        """
        C3
        B2──B3◂
            A1
            A2
            A3
        """

        t.select 0

        t.toString() ▸
        """
        C3◂
        B2──B3
            A1
            A2
            A3
        """

        t.select 1

        t.toString() ▸ 
        """
        C3
        B2◂─B3
            A1
            A2
            A3
        """

        t.select 1 1 1

        t.toString() ▸ 
        """
        C3
        B2──B3
            A1◂
            A2
            A3
        """
        
    # 0000000    00000000    0000000   000   000   0000000  000   000  
    # 000   000  000   000  000   000  0000  000  000       000   000  
    # 0000000    0000000    000000000  000 0 000  000       000000000  
    # 000   000  000   000  000   000  000  0000  000       000   000  
    # 0000000    000   000  000   000  000   000   0000000  000   000  
    
    ▸ branch
    
        t.addMove 'A3'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3◂
            A3
        """
        
        t.addMove 'A2'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3
            A3  A2◂
        """
        
        t.addMove 'A4'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3
            A3  A2
                A4◂
        """
        
        t.navigate 'up'
        t.addMove 'A5'

        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3
            A3  A2
                A4──A5◂
        """
        
        t.navigate 'back'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3
            A3  A2◂
                A4──A5
        """
        
        t.addMove 'A6'

        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3
            A3  A2
                A4──A5──A6◂
        """

    # 0000000     0000000    0000000  000   000  
    # 000   000  000   000  000       000  000   
    # 0000000    000000000  000       0000000    
    # 000   000  000   000  000       000  000   
    # 0000000    000   000   0000000  000   000  

    ▸ back
        
        t.navigate 'back'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3
            A3  A2◂
                A4──A5──A6
        """

        t.navigate 'back'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3◂
            A3  A2
                A4──A5──A6
        """

        t.navigate 'back'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1◂
            A2──A3
            A3  A2
                A4──A5──A6
        """

        t.navigate 'back'
        
        t.toString() ▸ 
        """
        C3
        B2──B3◂
            A1
            A2──A3
            A3  A2
                A4──A5──A6
        """

        t.navigate 'back'
        
        t.toString() ▸ 
        """
        C3◂
        B2──B3
            A1
            A2──A3
            A3  A2
                A4──A5──A6
        """

        t.navigate 'back'
        
        t.toString() ▸ 
        """
        C3◂
        B2──B3
            A1
            A2──A3
            A3  A2
                A4──A5──A6
        """

    # 000   000  000   0000000  000000000   0000000   00000000   000   000  
    # 000   000  000  000          000     000   000  000   000   000 000   
    # 000000000  000  0000000      000     000   000  0000000      00000    
    # 000   000  000       000     000     000   000  000   000     000     
    # 000   000  000  0000000      000      0000000   000   000     000     
    
    ▸ history
        
        t.select 1 1 2 1 2
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3
            A3  A2
                A4◂─A5──A6
        """
        
        t.history() ▸ ['C3''B3''A1''A3''A2''A4']
        
        t.select 1 1 2 1 2 1 0
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3
            A3  A2
                A4──A5◂─A6
        """
        
        t.history() ▸ ['C3''B3''A1''A3''A2''A5']

        t.navigate 'right'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3
            A3  A2
                A4──A5──A6◂
        """
        
        t.history() ▸ ['C3''B3''A1''A3''A2''A6']

        t.select 1 1 2 1 0
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3◂
            A3  A2
                A4──A5──A6
        """
        
        t.history() ▸ ['C3''B3''A1''A3']
        
    #  0000000   0000000    0000000    00     00   0000000   000   000  00000000  00000   
    # 000   000  000   000  000   000  000   000  000   000  000   000  000          000  
    # 000000000  000   000  000   000  000000000  000   000   000 000   0000000     000   
    # 000   000  000   000  000   000  000 0 000  000   000     000     000        000    
    # 000   000  0000000    0000000    000   000   0000000       0      00000000  000000  
    
    ▸ addmove2
    
        t.addMove 'A7'
        
        t.toString() ▸
        """
        C3
        B2──B3
            A1
            A2──A3
            A3  A2──────────A7◂
                A4──A5──A6
        """

        t.addMove 'A8'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3
            A3  A2──────────A7
                A4──A5──A6  A8◂
        """
        
        t.navigate 'back'
        t.navigate 'back'
        t.navigate 'back'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
            A1◂
            A2──A3
            A3  A2──────────A7
                A4──A5──A6  A8
        """
        
        t.addMove 'B12'

        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3──────────────B12◂
            A3  A2──────────A7
                A4──A5──A6  A8
        """

        t.addMove 'B13'

        t.toString() ▸ 
        """
        C3
        B2──B3
            A1
            A2──A3──────────────B12
            A3  A2──────────A7  B13◂
                A4──A5──A6  A8
        """
        
        t.history() ▸ ['C3''B3''A1''B12''B13']
        
        t.select 1
        
        t.addMove 'B14'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
        B14◂A1
            A2──A3──────────────B12
            A3  A2──────────A7  B13
                A4──A5──A6  A8
        """
        
        t.addMove 'B15'
        t.navigate 'back'
        
        t.toString() ▸ 
        """
        C3
        B2──B3
        B14◂A1
        B15 A2──A3──────────────B12
            A3  A2──────────A7  B13
                A4──A5──A6  A8
        """
        
        t.addMove 'B16'
         
        t.toString() ▸ 
        """
        C3
        B2──────B3
        B14     A1
        B15─B16◂A2──A3──────────────B12
                A3  A2──────────A7  B13
                    A4──A5──A6  A8
        """
        
        t.history() ▸ ['C3''B2''B14''B16']
        
        t.addMove 'C3'
        t.navigate 'back'
        t.addMove 'C4'

        t.toString() ▸ 
        """
        C3
        B2──────────B3
        B14         A1
        B15─B16     A2──A3──────────────B12
            C3──C4◂ A3  A2──────────A7  B13
                        A4──A5──A6  A8
        """
        
        t.history() ▸ ['C3''B2''B14''B16''C4']
        
    #  0000000   0000000   000      000   000  00     00  000   000   0000000  
    # 000       000   000  000      000   000  000   000  0000  000  000       
    # 000       000   000  000      000   000  000000000  000 0 000  0000000   
    # 000       000   000  000      000   000  000 0 000  000  0000       000  
    #  0000000   0000000   0000000   0000000   000   000  000   000  0000000   
    
    ▸ columns
    
        c = t.toColumns()
        c.cursor ▸ x:2 y:4
        c.columns ▸    [[
                            'C3'
                            'B2'
                            'B14'
                            'B15'
                        ],[
                            ''
                            '-'
                            ''
                            'B16'
                            'C3'
                        ],[
                            ''
                            '-'
                            ''
                            ''
                            'C4'
                        ],[
                            ''
                            'B3'
                            'A1'
                            'A2'
                            'A3'
                        ],[
                            ''
                            ''
                            ''
                            'A3'
                            'A2'
                            'A4'
                        ],[
                            ''
                            ''
                            ''
                            '-'
                            '-'
                            'A5'
                        ],[
                            ''
                            ''
                            ''
                            '-'
                            '-'
                            'A6'
                        ],[
                            ''
                            ''
                            ''
                            '-'
                            'A7'
                            'A8'
                        ],[
                            ''
                            ''
                            ''
                            'B12'
                            'B13'
                        ]]
                
                
    # 00000000    0000000   0000000    
    # 000   000  000   000  000   000  
    # 00000000   000   000  000   000  
    # 000        000   000  000   000  
    # 000         0000000   0000000    
    
    ▸ pod
    
        p = t.toPOD()

        t2 = new Tree().fromPOD p
        
        t.toString() ▸ t2.toString()
        